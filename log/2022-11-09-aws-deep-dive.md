# AWS Deep Dive

author:: Nathan Acks  
date:: 2022-11-09

# Amazon API Gateway

Continued notes about the Amazon API Gateway.

* [Amazon API Gateway: Developer Guide](https://docs.aws.amazon.com/apigateway/latest/developerguide/welcome.html)

## Working with REST APIs

* [Amazon API Gateway: Working with REST APIs](https://docs.aws.amazon.com/apigateway/latest/developerguide/apigateway-rest-api.html)

### Creating and Using Usage Plans with API Keys in API Gateway (Continued)

API keys can belong to multiple usage plans, and usage plans can be associated with multiple stages. But each API key can only be associated with *one* usage plan per stage.

* [2022-11-03 - AWS Deep Dive (Creating and Using Usage Plans with API Keys in API Gateway, Part 1)](2022-11-03-aws-deep-dive.md)
* [Creating and using usage plans with API keys](https://docs.aws.amazon.com/apigateway/latest/developerguide/api-gateway-api-usage-plans.html)

### Documenting REST APIs in API Gateway

Almost every relevant part of an API in API Gateway can have a `DocumentationPart` object associated with it; overall API documentation is then generated by collecting these objects. `DocumentationPart` objects are inherited within the API (except for documentation attached to `RESOURCE`, `AUTHORIZER`, and `MODEL` entities), but can then be overridden. API resource attachment is determined by the `DocumentationPart` object's `location` attribute; patterns can be used here, in which case `DocumentationPart` objects are matched according to specificity.

Documentation itself is stored as a string-encoded JSON object; this object can have any structure, but it's pretty clear that maximum mileage is obtained by using keys that are also used by the OpenAPI spec's documentation. (No matter how API documentation is attached, it must be provided as JSON; the difference is that the API Gateway console accepts the appropriate JSON blob and string encodes it for you, while for the AWS CLI you must unsurprisingly provide the encoded object yourself.)

Documentation is published in an OpenAPI `DocumentationVersion` file that is tagged with a specific documentation version and associated with a specific stage. Note that once a `DocumentationVersion` snapshot is created, *only* its `description` can be updated. `DocumentationVersion` snapshots are specified by their `version` attribute (really an (API ID, `version`) tuple, but API ID will be constant for a given API).

The default API documentation export excludes documentation about integrations and authorizers, as this is generally internal-only. Interestingly, when exported documentation is *both* integrated directly into the appropriate parts of the API definition *and* grouped in the `x-amazon-apigateway-documentation` property. The reason for this duplication is that the `x-amazon-apigateway-documentation` property contains the provided JSON documentation objects in full, while integration into individual parts of the API definition is only done for documentation properties that match the OpenAPI spec. Thus, if only OpenAPI documentation properties (or `x-` extensions) are included in the documentation JSON blob, the `x-amazon-apigateway-documentation` property will be completely duplicative.

Documentation can be imported as well, but is expected to live in an `x-amazon-apigateway-documentation` property. Seems mostly useful when porting an API between two accounts (though in that case, why import the documentation separately?).

* [Documenting REST APIs](https://docs.aws.amazon.com/apigateway/latest/developerguide/api-gateway-documenting-api.html)

### Generating an SDK for a REST API in API Gateway

SDKs must be regenerated whenever the API is redeployed (which makes sense, but also seems like kind of a drag...).

API Gateway has (IMHO) a somewhat brain-dead naming convention for exposed SDK functions based on the corresponding method's path. Fortunately, API methods can be assigned an `operationName` (represented as `operationId` in Swagger - OpenAPI? - definition files) value that overrides this default.

A `type` property can also be assigned (both to the API method and its response) for use in strongly typed languages. Models can also be defined for SDKs, which allows them to be instantiated as objects (for languages that support this), rather than requiring developers to build and parse function input and output manually.

* [Generating an SDK for a REST API in API Gateway](https://docs.aws.amazon.com/apigateway/latest/developerguide/how-to-generate-sdk.html)

<!--

# AWS Deep Dive

author:: Nathan Acks  
date:: 2022-11-11

# Amazon API Gateway

Continued notes about the Amazon API Gateway.

* [Amazon API Gateway: Developer Guide](https://docs.aws.amazon.com/apigateway/latest/developerguide/welcome.html)

## Working with REST APIs

* [Amazon API Gateway: Working with REST APIs](https://docs.aws.amazon.com/apigateway/latest/developerguide/apigateway-rest-api.html)

### # Use the Serverless Developer Portal to Catalog Your API Gateway APIs

> https://docs.aws.amazon.com/apigateway/latest/developerguide/apigateway-developer-portal.html

* [Use the serverless developer portal to catalog your API Gateway APIs](https://docs.aws.amazon.com/apigateway/latest/developerguide/apigateway-developer-portal.html)

## Working With HTTP APIs

xxx

* [Amazon API Gateway: Working with HTTP APIs](https://docs.aws.amazon.com/apigateway/latest/developerguide/http-api.html)

## Working With WebSocket APIs

xxx

* [Amazon API Gateway: Working with WebSocket APIs](https://docs.aws.amazon.com/apigateway/latest/developerguide/apigateway-websocket-api.html)

## API Gateway ARNs

xxx

* [API Gateway Amazon Resource Name (ARN) Reference](https://docs.aws.amazon.com/apigateway/latest/developerguide/arn-format-reference.html)

## OpenAPI Extensions

xxx

* [Working with API Gateway Extensions to OpenAPI](https://docs.aws.amazon.com/apigateway/latest/developerguide/api-gateway-swagger-extensions.html)

## Security

xxx

* [Security in Amazon API Gateway](https://docs.aws.amazon.com/apigateway/latest/developerguide/security.html)

## Tagging

xxx

* [Tagging your API Gateway Resources](https://docs.aws.amazon.com/apigateway/latest/developerguide/apigateway-tagging.html)

## API References

xxx

* [Amazon API Gateway: API References](https://docs.aws.amazon.com/apigateway/latest/developerguide/api-ref.html)

## Quotas and Important Notes

xxx

* [Amazon API Gateway Quotas and Important Notes](https://docs.aws.amazon.com/apigateway/latest/developerguide/limits.html)

# AWS KMS Cryptographic Details

xxx

## Introduction

xxx

* [Introduction to the Cryptographic Details of AWS KMS](https://docs.aws.amazon.com/kms/latest/cryptographic-details/intro.html)

## AWS Key Management Service Foundations

xxx

* [AWS Key Management Service Foundations](https://docs.aws.amazon.com/kms/latest/cryptographic-details/foundation.html)

## Use Cases

xxx

* [AWS KMS Use Cases](https://docs.aws.amazon.com/kms/latest/cryptographic-details/use-cases.html)

## AWS KMS Keys

xxx

* [Working with AWS KMS Keys](https://docs.aws.amazon.com/kms/latest/cryptographic-details/kms-keys.html)

## Customer Data Operations

xxx

* [AWS Key Management Service: Customer Data Operations](https://docs.aws.amazon.com/kms/latest/cryptographic-details/customer-data-operations.html)

## AWS KMS Internal Operations

xxx

* [AWS KMS Internal Operations](https://docs.aws.amazon.com/kms/latest/cryptographic-details/kms-internals.html)

# AWS Well-Architected Framework

xxx

## Abstract and Introduction

xxx

* [AWS Well-Architected Framework](https://docs.aws.amazon.com/wellarchitected/latest/framework/welcome.html)

## The Pillars of the Framework

xxx

* [AWS Well-Architected Framework: The Pillars of the Framework](https://docs.aws.amazon.com/wellarchitected/latest/framework/the-pillars-of-the-framework.html)

## The Review Process

xxx

* [AWS Well-Architected Framework: The Review Process](https://docs.aws.amazon.com/wellarchitected/latest/framework/the-review-process.html)

## Conclusion

xxx

* [AWS Well-Architected Framework: Conclusion](https://docs.aws.amazon.com/wellarchitected/latest/framework/conclusion.html)

## Questions and Best Practices

xxx

* [AWS Well-Architected Framework: Questions and Best Practices](https://docs.aws.amazon.com/wellarchitected/latest/framework/appendix.html)

# Signature Version 4 Signing Process

xxx

* [Signature Version 4 Signing Process](https://docs.aws.amazon.com/general/latest/gr/signature-version-4.html)

## Changes in Signature Version 4

xxx

* [Changes in Signature Version 4](https://docs.aws.amazon.com/general/latest/gr/sigv4_changes.html)

## Signature Version 4 Request Elements

xxx

* [Elements of an AWS Signature Version 4 Request](https://docs.aws.amazon.com/general/latest/gr/sigv4_elements.html)

## Signing AWS Requests

xxx

* [Signing AWS Requests with Signature Version 4](https://docs.aws.amazon.com/general/latest/gr/sigv4_signing.html)

## Handling Dates

xxx

* [Handling Dates in Signature Version 4](https://docs.aws.amazon.com/general/latest/gr/sigv4-date-handling.html)

## How to Derive a Signing Key

xxx

* [Examples of How to Derive a Signing Key for Signature Version 4](https://docs.aws.amazon.com/general/latest/gr/signature-v4-examples.html)

## Signing Examples

xxx

* [Examples of the Complete Signature Version 4 Signing Process](https://docs.aws.amazon.com/general/latest/gr/sigv4-signed-request-examples.html)

## Troubleshooting

xxx

* [Troubleshooting AWS Signature Version 4 Errors](https://docs.aws.amazon.com/general/latest/gr/signature-v4-troubleshooting.html)

# AWS Networking Example

xxx

* [AWS - Networking Example](https://ardsec.blogspot.com/2018/09/networking-in-aws.html)

# AWS Developer Tools

xxx

* [AWS - Developer Tools](https://ardsec.blogspot.com/2018/09/devops-in-aws.html)

# AWS Compute Services

xxx

* [AWS - Compute Services](https://ardsec.blogspot.com/2019/05/aws-compute-services.html)

# AWS Container Services

xxx

* [AWS - Container Services](https://ardsec.blogspot.com/2019/05/aws-compute-container-services.html)

# AWS Storage Services

xxx

* [AWS - Storage Services](https://ardsec.blogspot.com/2019/05/aws-storage-services.html)

# AWS Database Services

xxx

* [AWS - Database Services](https://ardsec.blogspot.com/2019/05/aws-database-services.html)

# AWS Migration Services

xxx

* [AWS - Migration Services](https://ardsec.blogspot.com/2019/05/aws-migration-service.html)

# AWS Networking Services

xxx

* [AWS - Networking Services](https://ardsec.blogspot.com/2019/05/aws-networking-services.html)

# AWS Security, Identity, and Compliance

xxx

* [AWS - Security, Identity, and Compliance](https://ardsec.blogspot.com/2019/06/aws-security-identity-and-compliance.html)

-->

<!-- (Walk through Learning Path 2 on the internal wiki.) -->

<!-- Finish up the TryHackMe: Jr. Penetration Tester "Supplements" -->

<!--

# PortSwigger Web Security Academy

(There are 210 total labs. I should try to do them all.)

(Maybe I should just get the Burp Suite Certified Practitioner at this point? See: <https://portswigger.net/web-security/certification>.)

* [PortSwigger: Web Security Academy](https://portswigger.net/web-security/learning-path)

## SQL Injection

## Authentication

## Directory Traversal

## Command Injection

## Business Logic Vulnerabilities

## Information Disclosure

## Access Control

## File Upload Vulnerabilities

## Server-Side Request Forgery (SSRF)

## XXE Injection

## Cross-Site Scripting (XSS)

## Cross-Site Request Forgery (CSRF)

## Cross-Origin Resource Sharing (CORS)

## Clickjacking

## DOM-Based Vulnerabilites

## WebSockets

## Insecure Deserialization

## Server-Side Template Injection

## Web Cache Poisoning

## HTTP Host Header Attacks

## HTTP Request Smuggling

## OAuth Authentication

-->

<!-- Resume my normally planned learning path. -->
